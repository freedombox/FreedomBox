# Do not edit this file. Manage your settings on FreedomBox.

# Default sieve scripts applied for delivery to all users. To move mail to Junk
# folder based on classification headers set by rspamd. See:
# https://doc.dovecot.org/settings/pigeonhole/

plugin {
  sieve_after = /etc/dovecot/freedombox-sieve-after

  # Make rspamd learn spam/ham when the user marks mails as junk or not junk.
  # https://doc.dovecot.org/2.3/configuration_manual/howto/antispam_with_sieve/
  sieve_plugins = sieve_imapsieve sieve_extprograms
  sieve_pipe_bin_dir = /usr/bin
  sieve_global_extensions = +vnd.dovecot.pipe +vnd.dovecot.environment

  # From elsewhere to Junk folder
  imapsieve_mailbox1_name = Junk
  imapsieve_mailbox1_causes = COPY
  imapsieve_mailbox1_before = file:/etc/dovecot/freedombox-sieve/learn-spam.sieve

  # From Junk folder to elsewhere
  imapsieve_mailbox2_name = *
  imapsieve_mailbox2_from = Junk
  imapsieve_mailbox2_causes = COPY
  imapsieve_mailbox2_before = file:/etc/dovecot/freedombox-sieve/learn-ham.sieve
}
