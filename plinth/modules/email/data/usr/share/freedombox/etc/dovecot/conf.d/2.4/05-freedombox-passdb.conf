# Do not edit this file. Manage your settings on FreedomBox.

# See:
# https://doc.dovecot.org/main/core/config/auth/passdb.html
# https://doc.dovecot.org/main/howto/active_directory.html
#
# For passdb, the passwd driver looks up using NSS. In FreedomBox, NSS is
# configured to lookup LDAP with the help of libnss-ldapd. Lookup using passdb
# would have been sufficient if FreedomBox allowed all its users to login using
# pam. However, by default, FreedomBox disallows all users but 'admin' group to
# login. Hence, the need for LDAP lookup.
#
passdb freedombox-ldap {
  driver = ldap
  ldap_uris = ldapi:///
  ldap_base = dc=thisbox
  ldap_bind = yes
  ldap_bind_userdn = uid=%{user},ou=users,dc=thisbox
  ldap_filter = (&(objectClass=posixAccount)(uid=%{user}))
}
